[TOC]



# 项目测试注意事项

## HDFS

### 退出HDFS的安全模式

```shell
hdfs fsck  /  -delete
```

## Kafka

### 重复消费

在代码第一次测试成功以后.

![Snipaste_2022-11-20_19-18-45](assets\Snipaste_2022-11-20_19-18-45.png)

并且HDFS上也有数据文件生成

![Snipaste_2022-11-20_19-19-02](assets\Snipaste_2022-11-20_19-19-02.png)

如果想要重复测试并且消费kafka分区里的同一份数据的话，就要修改conf.properties里的consumer_groupid，或者删除kafka分区，重新创建分区然后通过FlinkReadFromKafka方法重新将数据从HDFS上读取到Kafka里

![Snipaste_2022-11-20_19-19-36](assets\Snipaste_2022-11-20_19-19-36.png)

因为想要重复的消费数据就要满足两个条件：

```properties
（1）使用一个全新的"group.id"（就是之前没有被任何消费者使用过）;
（2）指定"auto.offset.reset"参数的值为earliest；
```

从kafka-0.9版本及以后，kafka的消费者组和offset信息就不存zookeeper了，而是存到broker服务器上，所以，如果你为某个消费者指定了一个消费者组名称（group.id），那么，一旦这个消费者启动，这个消费者组名和它要消费的那个topic的offset信息就会被记录在broker服务器上。

第一个条件在代码里指定了，所以想要重复测试的话，只需要修改conf.properties里的consumer_groupid为一个全新的id即可

